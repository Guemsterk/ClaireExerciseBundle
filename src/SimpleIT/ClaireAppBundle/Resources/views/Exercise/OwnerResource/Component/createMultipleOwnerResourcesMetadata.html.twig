<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js" xmlns="http://www.w3.org/1999/html" xmlns="http://www.w3.org/1999/html"></script>

<h2>Outil d'ajout multiple de métadonnées</h2>

<form action="{{ path('simple_it_claire_component_exercise_multiple_owner_resource_metadata_edit') }}" method="post">
    <table id="metadataList">
        <tr>
            <td>
                Clé :
            </td>
            <td>
                <input type="text" size="20" name="metaKey"/>
            </td>
            <td>
                Valeur :
            </td>
            <td>
                <input type="text" size="30" name="metaValue"/>
            </td>
        </tr>
    </table>

    <input type="button" onclick="addResourceId()" value="Ajouter"/>

    <table id="ownerResourceList">
        <tr><th>Id de ressource</th></tr>
        <tr>
            <td>
                <input type="text" size="20" name="resourceIds[]"/>
            </td>
            <td>
                <button type="button" class="js-remove">-</button>
            </td>
        </tr>
    </table>

    <input type="submit"/>
</form>

<script>
    function addResourceId() {
        var
                $table = $('#ownerResourceList'),
                $lines = $('tr', $table),
                $last = $lines.last(),
                $clone = $last.clone();

        $clone
                .find('input[type=text]')
                .attr('name', 'resourceIds[]')
                .val('');

        $clone.appendTo($table);
    }

    $(function () {
        $('table').on('click', '.js-remove', function (event) {
            $(event.target).closest('tr').remove();
        })
    })
</script>
