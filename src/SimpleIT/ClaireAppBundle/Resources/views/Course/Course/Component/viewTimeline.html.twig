{% macro processPart(part, baseSlug, level) %}
    <ul class="level-{{ level }}">
        <li>
            <a class="course-title course-title-{{ level }}" data-claire-course-slug="{{ part.slug }}" href="{% if level > 0 %}{{ baseSlug }}/{% endif %}{{ part.slug }}">
                {% if part.metadatas.image is defined %}
                    <img class="course-icon" src="{{ part.metadatas.image }}" />
                {% endif %}
                <span>{{- part.title -}}</span>
            </a>
            {% if part.children|length > 0 %}

                {% if level == 1 %}
                    <section>
                {% endif %}

                {% for child in part.children %}
                    {{ _self.processPart(child, baseSlug, level + 1) }}
                {% endfor %}

                {% if level == 1 %}
                    </section>
                {% endif %}

            {% endif %}
        </li>
    </ul>
{% endmacro %}

<nav class="course-timeline">
    {{ _self.processPart(toc, toc.slug, 0) }}
</nav>
