{% macro processToc(mainClass, part, level, categoryIdentifier, courseIdentifier, displayLevel) %}
    {# set displayLevel = 1 #}
    {% if level == 0 %}
        <div class="{{ mainClass }}" style="padding:8px">
            <nav>
                <ul class="level-0">
    {% endif %}

            <li>
                <a class="course-title course-title-{{ level }}" data-claire-course-slug="{{ part.slug }}" href="{{ path ('simple_it_claire_course_part_view', {'categoryIdentifier': categoryIdentifier,'courseIdentifier': courseIdentifier, 'partIdentifier': part.slug})}}">
                    {% if part.metadatas.image is defined %}
                        <img class="course-icon" src="{{ part.metadatas.image }}" />
                    {% endif %}
                    <span>{{- part.title -}}</span>
                </a>

                {% if part.children|length > 0 and (level < 1 or (displayLevel > 1 and mainClass != 'toc-medium')) %}

                    {% if level == 1 %}
                        <section>
                    {% endif %}

                        <ul class="level-{{ level + 1 }}">
                            {% for child in part.children %}
                                {{ _self.processToc(mainClass, child, level + 1, categoryIdentifier, courseIdentifier, displayLevel) }}
                            {% endfor %}
                        </ul>

                    {% if level == 1 %}
                        </section>
                    {% endif %}

                {% endif %}

            </li>

    {% if level == 0 %}
                </ul>
            </nav>
        </div>
    {% endif %}

{% endmacro %}
