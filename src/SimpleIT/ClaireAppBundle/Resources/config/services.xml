<?xml version="1.0" ?>

<container xmlns="http://symfony.com/schema/dic/services" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://symfony.com/schema/dic/services http://symfony.com/schema/dic/services/services-1.0.xsd">

    <imports>
        <import resource="service/associated_content.xml"/>
        <import resource="service/course.xml"/>
        <import resource="service/security.xml"/>
        <import resource="service/user.xml"/>
    </imports>

    <parameters>
        <parameter key="simple_it.claire.twig.extension.class">SimpleIT\ClaireAppBundle\Twig\ClaireAppExtension</parameter>

        <parameter key="simple_it.claire_api.class">SimpleIT\ClaireAppBundle\Api\ClaireApi</parameter>

        <parameter key="simple_it.claire_categories_api.class">SimpleIT\ClaireAppBundle\Api\CategoryRouteService</parameter>
        <parameter key="simple_it.claire.http.transport.class">SimpleIT\AppBundle\Services\HttpTransport</parameter>

        <parameter key="simple_it.claire.associated_course.class">SimpleIT\ClaireAppBundle\Services\CourseAssociation\AssociatedCourseService</parameter>
        <parameter key="simple_it.claire.twig.metadata.class">SimpleIT\ClaireAppBundle\Twig\MetadataExtension</parameter>

        <parameter key="simple_it.claire.buzz.client.class">SimpleIT\AppBundle\Buzz\Client\MultiCurl</parameter>
        <parameter key="buzz.browser.class">Buzz\Browser</parameter>

        <!-- REPOSITORIES CLASS -->
        <parameter key="simple_it.claire.repository.associated_course.class">SimpleIT\ClaireAppBundle\Repository\CourseAssociation\AssociatedCourseRepository</parameter>
    </parameters>

    <services>

        <service id="simple_it.claire.twig.extension" class="%simple_it.claire.twig.extension.class%">
            <tag name="twig.extension"/>
        </service>

        <service id="simple_it.claire.http_client" class="%simple_it.app.http_client.class%" factory-service="simple_it.app.client_factory" factory-method="get">
            <argument>%simple_it_app.client_api.claire_api%</argument>
        </service>
        <service id="simple_it.claire.serializer" class="%simple_it.app.serializer.class%">
            <argument type="service" id="serializer"/>
            <argument>%simple_it_app.client_api.claire_api.default_format%</argument>
        </service>

        <!--OLD SHIT-->

        <service id="simple_it.claire.buzz.client" class="%simple_it.claire.buzz.client.class%" public="false"/>

        <service id="simple_it.claire.buzz" class="%buzz.browser.class%">
            <argument type="service" id="simple_it.claire.buzz.client"/>
            <argument type="service" id="buzz.message_factory"/>
        </service>

        <service id="simple_it.claire.http.transport" parent="simple_it.claire.buzz" class="%simple_it.claire.http.transport.class%">
            <call method="setHost">
                <argument>%simple_it_claire_app.host%</argument>
            </call>
        </service>

        <service id="claire_api_service" class="%simple_it.claire_api.class%" parent="api">
            <call method="setTransportService">
                <argument type="service" id="simple_it.claire.http.transport"/>
            </call>
        </service>

        <service id="claire_categories_api" class="%simple_it.claire_categories_api.class%"/>

    </services>

</container>
